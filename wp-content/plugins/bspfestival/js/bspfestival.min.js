jQuery(document).ready(function(a){function t(a,t,e){t+1<={one:1,two:2,three:3,four:4,five:5}[e]?a.addClass("fa-star").removeClass("fa-star-o"):a.addClass("fa-star-o").removeClass("fa-star")}function e(){a("#myModal").modal("show");var t={_ajax_nonce:bspf_ajax.nonce,action:"BSPFAjaxGetVote"};a.get(bspf_ajax.ajax_url,t,function(t){a(".star-bspf-pub").removeClass("fa-star").addClass("fa-star-o").attr("title","Make favorite!");for(var e in t.voted)a(".star-bspf-pub[data-pid='"+t.voted[e]+"']").removeClass("fa-star-o").addClass("fa-star").attr("title","Favorite!");a("#myModal").modal("hide")},"json")}document.getElementsByClassName("pop")&&(a("#ModalImage").modal("show"),a(".pop").on("click",function(){a("#ModalImage").modal("show")})),a("#ModalImage").on("hidden.bs.modal",function(a){e()});var s=a(".bspf-gallery-wrapper");s.lightGallery({selector:".img-wrapper",mousewheel:!1,download:!1,thumbnail:!1,autoplay:!1,fullScreen:!1,zoom:!1,googlePlus:!1,pinterest:!1}),s.on("onCloseAfter.lg",function(a){e()}),s.on("onAfterAppendSubHtml.lg",function(t,e){var s=a(".lg-sub-html").find(".star-bspf-pub");if(a(s).removeClass("fa-star fa-star-o").addClass("fa-spinner fa-spin"),!a(s).hasClass("checked")){var o={_ajax_nonce:bspf_ajax.nonce,action:"BSPFAjaxGetVote",pid:a(s).attr("data-pid")};a.get(bspf_ajax.ajax_url,o,function(t){a(s).hasClass("checked")||(!0===t.is_voted?a(s).removeClass("fa-spinner fa-spin").addClass("fa-star checked").attr("title","Favorite!"):a(s).removeClass("fa-spinner fa-spin").addClass("fa-star-o checked").attr("title","Make favorite!"))},"json")}a(".star-bspf-pub").click(function(){if(!a(this).hasClass("fa-spinner")){var t=this,e={_ajax_nonce:bspf_ajax.nonce,action:"BSPFAjaxVoting",pid:a(this).attr("data-pid"),favorite:a(this).hasClass("fa-star-o")};a(this).removeClass("fa-star fa-star-o").addClass("fa-spinner fa-spin"),a.post(bspf_ajax.ajax_url,e,function(e){"true"==e.favorite?a(t).removeClass("fa-spinner fa-spin").addClass("fa-star").attr("title","Favorite!"):"false"==e.favorite&&a(t).removeClass("fa-spinner fa-spin").addClass("fa-star-o").attr("title","Make favorite!")},"json").fail(function(){a(t).parent().prepend('<span class="text-danger">[01] Error!</span>')},"json")}})}),s.on("onSlideItemLoad.lg",function(t,e){var s="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a(".star-bspf-pub.checked").attr("data-url"))+"&picture="+encodeURIComponent(a(".lg-image:visible").attr("src"))+"&title="+encodeURIComponent(a(".lg-sub-html").text()+" - BSPF Social Media Voting")+"&caption="+encodeURIComponent("bspfestival.org")+"&description="+encodeURIComponent("Brussels Street Photography Festival contest submission entry. Vote on your favorite photo and help the photographer win the Social Media Prize."),o="https://twitter.com/intent/tweet?text=Vote for "+encodeURIComponent(a(".star-bspf-pub.checked").attr("data-name"))+" on the BSPF Contest!&url="+encodeURIComponent(a(".star-bspf-pub.checked").attr("data-url"))+"&hashtags=StreetPhotography,BSPF2017&via=BSPFestival_Off";a("#lg-share-facebook").attr("href",s),a("#lg-share-twitter").attr("href",o)}),a(".img-bspf-private").click(function(){a(this).toggleClass("img-bspf-selected"),totalSelected=a(".img-bspf-selected").length,console.log("selected photos: "+totalSelected),a(".selected-photos").text(totalSelected),totalSelected>0?a(".bspf-toolbar").show():a(".bspf-toolbar").hide()}),a(".star-bspf-toolbar").click(function(){a(".star-bspf-toolbar").removeClass("selected"),a(this).removeClass("fa-star-o").addClass("selected fa-star").delay(500).queue(function(){a(this).removeClass("selected fa-star").addClass("fa-star-o").dequeue()});var e=a(this).parent().attr("class");a(".img-bspf-selected").each(function(s){a(this).parent().find("ul").children().each(function(s){t(a(this).children(),s,e)})})}),a(".star-bspf").click(function(){var e=a(this).parent().attr("class"),s=a(this).parent().parent().find(".fa-star:last").parent().attr("class");e!=s?(a(this).addClass("fa-star").removeClass("fa-star-o"),a(this).parent().parent().children().each(function(s){t(a(this).children(),s,e)})):e==s&&a(this).parent().parent().children().each(function(t){a(this).children().addClass("fa-star-o").removeClass("fa-star")})}),a(".star-bspf-pub").click(function(){if(!a(this).hasClass("fa-spinner")){var t=this,e={_ajax_nonce:bspf_ajax.nonce,action:"BSPFAjaxVoting",pid:a(this).attr("data-pid"),favorite:a(this).hasClass("fa-star-o")};a(this).removeClass("fa-star fa-star-o").addClass("fa-spinner fa-spin"),a.post(bspf_ajax.ajax_url,e,function(e){"true"==e.favorite?a(t).removeClass("fa-spinner fa-spin").addClass("fa-star").attr("title","Favorite!"):"false"==e.favorite&&a(t).removeClass("fa-spinner fa-spin").addClass("fa-star-o").attr("title","Make favorite!")},"json").fail(function(){a(t).parent().prepend('<span class="text-danger">[01] Error!</span>')},"json")}})});